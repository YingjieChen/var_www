$(function(){window.config={root:"api.u7jewelry.com"};var Head=React.createClass({displayName:"Head",render:function(){return React.createElement("div",{className:"head"},React.createElement("div",{className:"logo"},"LOGO"))}});var Left_Pane=React.createClass({displayName:"Left_Pane",componentDidMount:function(){$.ajax({url:"//"+window.config.root+"/index.php/Home/Index/config",dataType:"json",success:function(data){this.setState(data)}.bind(this)})},getInitialState:function(){this.permission=JSON.parse(window.config2.admin.permission);console.log(this.permission);console.log(this.permission.indexOf(1)>-1);return{menulist:[]}},render:function(){return React.createElement("div",{className:"leftpane"},React.createElement("div",{className:"menu_list"},this.state.menulist.map(function(item,index){return React.createElement("ul",{id:item.object,ref:item.object},this.permission.indexOf(parseInt(item.id))>-1?React.createElement("a",{"data-menu_name":item.object,onClick:this.props.onMenuClick},item.name):"",item.sub.map(function(sub,subindex){if(this.permission.indexOf(parseInt(sub.id))>-1){return React.createElement("li",{"data-obj":sub.object,"data-file":sub.object,"data-title":sub.name,onClick:this.props.onMenuItemClick},sub.name)}}.bind(this)))}.bind(this))))}});var Tabs=React.createClass({displayName:"Tabs",render:function(){return React.createElement("div",{className:"tabs"},this.props.tabs.map(function(item,index){return React.createElement("div",{className:"tab","data-selected":index,onClick:this.props.onTabChange},item,React.createElement("span",{"data-closetarget":index,className:"close",onClick:this.props.onClose},"X"))}.bind(this)))}});var Contents=React.createClass({displayName:"Contents",render:function(){return React.createElement("div",{className:"contentpanes"},this.props.contents.map(function(item,index){return index==this.props.selected?React.createElement("div",{ref:"contentpane"+index,className:"contentpane"},React.createElement(eval(item),null)):""}.bind(this)))}});var Content=React.createClass({displayName:"Content",getInitialState:function(){document.title="U7管理后台";return{tabs:[],contents:[],selected:-1}},closeclick:function(){var closetarget=event.target.dataset.closetarget;this.state.tabs.splice(closetarget,1);this.state.contents.splice(closetarget,1);this.forceUpdate()},tabChange:function(){var selected=event.target.dataset.selected;this.state.selected=selected;this.state.selected=selected;document.title=this.state.selected>-1?this.state.tabs[this.state.selected]:"XX管理后台";this.forceUpdate()},menu_click:function(){var menuname=event.target.dataset.menu_name;$(".menu_list ul li").css("display","none");$("#"+menuname+" li").css("display","block")},menu_item_click:function(){var file=event.target.dataset.file;var obj=event.target.dataset.obj;var title=event.target.dataset.title;document.title=title;$.getScript("js/"+file+".min.js",function(){if(this.state.tabs.indexOf(title)>-1){this.state.selected=this.state.tabs.indexOf(title)}else{this.state.tabs.push(title);this.state.contents.push(eval(obj));this.state.selected++}this.forceUpdate()}.bind(this))},render:function(){return React.createElement("div",null,React.createElement(Head,null),React.createElement("div",{className:"main_pane"},React.createElement(Left_Pane,{onMenuClick:this.menu_click,onMenuItemClick:this.menu_item_click}),React.createElement("div",{className:"rightpane"},React.createElement(Tabs,{tabs:this.state.tabs,onClose:this.closeclick,onTabChange:this.tabChange}),React.createElement(Contents,{contents:this.state.contents,selected:this.state.selected?this.state.selected:0}))),React.createElement("div",{className:"modal fade",id:"confirmbox",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}))}});var LoginObj=React.createClass({displayName:"LoginObj",doLogin:function(){$.getScript("./js/md5.min.js",function(){var account=this.refs.account.value;var code=this.refs.code.value;var password=hex_md5(this.refs.password.value);$.ajax({url:"/index.php/Home/Config/checkLogin?code="+code+"&account="+account+"&password="+password,dataType:"json",success:function(data){if(data.errcode==0){window.history.go(0)}}.bind(this)})}.bind(this))},verifychange:function(){var target=event.target;target.src="/index.php/Home/Config/loginVerify?"+Math.random()},render:function(){return React.createElement("div",{className:"loginWrap"},React.createElement("form",{className:"loginForm"},React.createElement("p",null,"Login Form"),React.createElement("p",null,React.createElement("input",{ref:"account",name:"account",placeholder:"Please input account..."})),React.createElement("p",null,React.createElement("input",{ref:"password",type:"password",name:"password",placeholder:"Please input password"})),React.createElement("p",null,React.createElement("img",{src:"/index.php/Home/Config/loginVerify",onClick:this.verifychange}),React.createElement("input",{ref:"code",name:"code"})),React.createElement("p",null,React.createElement("input",{type:"button",value:"Login",onClick:this.doLogin}))))}});if(window.config2.admin!=null){var ContentObj=ReactDOM.render(React.createElement(Content,null),document.body)}else{var ContentObj=ReactDOM.render(React.createElement(LoginObj,null),document.body)}});