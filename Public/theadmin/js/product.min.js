$(function(){$("#descriptionclick").click(function(){if(window.descriptionstatus==0){$("#descriptionminus").removeClass("descriptionhide");$("#descriptionplus").addClass("descriptionhide");$("#description").slideDown();window.descriptionstatus=1}else{$("#descriptionplus").removeClass("descriptionhide");$("#descriptionminus").addClass("descriptionhide");$("#description").slideUp();window.descriptionstatus=0}});$("#spclick").click(function(){if(window.spstatus==0){$("#spminus").removeClass("descriptionhide");$("#spplus").addClass("descriptionhide");$("#sp").slideDown();window.spstatus=1}else{$("#spplus").removeClass("descriptionhide");$("#spminus").addClass("descriptionhide");$("#sp").slideUp();window.spstatus=0}});var a=React.createClass({displayName:"Reviews",startfull:function(b){$("a[name=starrating]").addClass("spr-icon-star-empty");for(var c=1;c<=b;c++){$("a[data-value="+c+"]").removeClass("spr-icon-star-empty")}this.refs.rating.value=b},changewriting:function(){this.writing=(this.writing+1)%2;this.bodyleft=1500;this.forceUpdate()},openfiledialog:function(){this.refs["reviewattache"+this.imagelist[this.imagelist.length-1]].click()},fileselected:function(){var d=this.refs["preload"+this.imagelist[this.imagelist.length-1]];var c=this.refs["reviewattache"+this.imagelist[this.imagelist.length-1]].files[0];var b=new FileReader();b.onloadend=function(){d.src=b.result};if(c){b.readAsDataURL(c)}else{d.src=""}if(this.imagelist.length<6){this.imagelist.push(this.imagelist.length);this.forceUpdate()}else{alert("No more than 5 images!")}},deletepre:function(b){this.imagelist.splice(b,1);this.forceUpdate()},bodychange:function(){var b=this.refs.reviewbody.value;this.bodyleft=1500-b.length;this.forceUpdate()},formsubmit:function(){var e=event.target;e.className=e.className+" disabled";e.innerHTML="Commiting...";var b=new XMLHttpRequest();b.open("post",configobject.protocal+configobject.root+"/index.php/Home/Reviewatt/submitreview",true);var c=document.getElementById("new-review-form");var d=new FormData(c);b.onreadystatechange=function(){if(b.readyState==4&&b.status==200){d=JSON.parse(b.responseText);this.writebutton=0;this.forceUpdate();this.refs.new_review_form.innerHTML=d.msg}}.bind(this);b.send(d)},pagination:function(b){if(b>this.state.totalpage){return false}$.ajax({url:configobject.protocal+configobject.root+"/index.php/Home/Reviewatt/relistsortbyproid",type:"get",dataType:"json",timeout:3000,data:{product_id:this.productid,page:b},success:function(c){this.setState(c)}.bind(this),error:function(c){this.root=window.configobject.root;$.getScript("https://cdn.shopify.com/s/files/1/0964/9808/t/80/assets/reviews.js",function(d){this.setState({total:window.reviews[this.productid].length,selected:b,rows:window.reviews[this.productid].slice((b-1)*5,b*5),pagesize:5,totalpage:Math.ceil(window.reviews[this.productid].length/5),avg:5})}.bind(this))}.bind(this)})},componentDidMount:function(){this.pagination(1)},generatestart:function(d){var b=[];for(var c=1;c<=5;c++){if(c<=d){b.push(React.createElement("i",{className:"spr-icon spr-icon-star"}))}else{b.push(React.createElement("i",{className:"spr-icon spr-icon-star spr-icon-star-empty"}))}}return b},piczoon:function(){var b=event.target;b.src=b.src.replace("thumb/","");$(".jqzoompropic img").css({width:"100px",height:"auto"});$(".jqzoompropic").css({width:"100px",height:"auto"});b.style.width=window.screen.width>500?"500px":"100%";b.style.height="auto";b.parentNode.style.height="auto";b.parentNode.style.width=window.screen.width>500?"500px":"100%"},getInitialState:function(){this.writebutton=1;this.productid=window.productid;this.producttitle=window.producttitle;this.producturl=window.producturl;this.imagelist=[0];this.writing=0;this.bodyleft=1500;this.showreviewlist=0;this.root=window.configobject.protocal+window.configobject.root;return{total:0,selected:1,rows:[],pagesize:5,totalpage:1,avg:0}},changereviewshow:function(){this.showreviewlist=(this.showreviewlist+1)%2;this.forceUpdate()},render:function(){return React.createElement("div",{className:"spr-container"},React.createElement("div",{className:"spr-header"},React.createElement("h2",{className:"spr-header-title"},"Add Your Review(s)"),React.createElement("div",{className:"spr-summary"},React.createElement("span",{className:"spr-starrating spr-summary-starrating"},this.generatestart(this.state.avg)),React.createElement("span",{className:"spr-summary-caption"},this.state.total==0?"No reviews yet":"",React.createElement("a",{href:"#none",className:"spr-summary-actions-togglereviews",onClick:this.changereviewshow},this.state.total>0?"Based on "+this.state.total+" review":"",this.state.total>1?"s":"")),this.writebutton==1?React.createElement("span",{className:"spr-summary-actions"},React.createElement("a",{href:"#none",refs:"openingform",className:"spr-summary-actions-newreview",onClick:this.changewriting,Style:{"float":"right"}},"Write a review")):"")),React.createElement("div",{className:"spr-content"},this.writing==1?React.createElement("div",{className:"spr-form"},React.createElement("form",{id:"new-review-form",ref:"new_review_form",action:"#",encType:"multipart/form-data",className:"new-review-form"},React.createElement("input",{ref:"rating",type:"hidden",name:"review[rating]"}),React.createElement("input",{ref:"product_id",type:"hidden",name:"product_id",defaultValue:this.productid,value:this.productid}),React.createElement("input",{ref:"product_id",type:"hidden",name:"product_title",defaultValue:this.producttitle,value:this.producttitle}),React.createElement("input",{ref:"product_id",type:"hidden",name:"product_url",defaultValue:this.producturl,value:this.producturl}),React.createElement("h3",{className:"spr-form-title"},"Write a review"),React.createElement("fieldset",{className:"spr-form-contact"},React.createElement("div",{className:"spr-form-contact-name"},React.createElement("label",{className:"spr-form-label"},"Name"),React.createElement("input",{className:"spr-form-input spr-form-input-text",maxLength:"32",type:"text",name:"review[author]",defaultValue:"",placeholder:"Enter your name"}))),React.createElement("fieldset",{className:"spr-form-review"},React.createElement("div",{className:"spr-form-review-rating"},React.createElement("label",{className:"spr-form-label","for":"review[rating]"},"Rating"),React.createElement("div",{className:"spr-form-input spr-starrating "},React.createElement("a",{href:"#none",name:"starrating",className:"spr-icon spr-icon-star spr-icon-star-empty","data-value":"1",onClick:this.startfull.bind(this,1)},"\xA0"),React.createElement("a",{href:"#none",name:"starrating",className:"spr-icon spr-icon-star spr-icon-star-empty","data-value":"2",onClick:this.startfull.bind(this,2)},"\xA0"),React.createElement("a",{href:"#none",name:"starrating",className:"spr-icon spr-icon-star spr-icon-star-empty","data-value":"3",onClick:this.startfull.bind(this,3)},"\xA0"),React.createElement("a",{href:"#none",name:"starrating",className:"spr-icon spr-icon-star spr-icon-star-empty","data-value":"4",onClick:this.startfull.bind(this,4)},"\xA0"),React.createElement("a",{href:"#none",name:"starrating",className:"spr-icon spr-icon-star spr-icon-star-empty","data-value":"5",onClick:this.startfull.bind(this,5)},"\xA0"))),React.createElement("div",{className:"bs-example bs-example-images"},this.imagelist.map(function(c,b){return React.createElement("span",{style:{border:"1px #F40 solid",width:"140px",height:"160px",display:b==this.imagelist.length-1?"none":"block","float":"left",marginRight:"10px"}},React.createElement("img",{ref:"preload"+c,classNamme:"img-rounded",alt:"140x140",src:"","data-holder-rendered":"true",style:{width:"140px",height:"140px"}}),React.createElement("input",{ref:"reviewattache"+c,type:"file",name:"reviewattache[]",style:{display:"none"},accept:"image/*",onChange:this.fileselected}),React.createElement("center",null,React.createElement("p",{onClick:this.deletepre.bind(this,b)},"X")))}.bind(this))),React.createElement("p",{style:{clear:"both"}},React.createElement("a",{type:"button",className:"btn btn-default",onClick:this.openfiledialog},"Click to choose file")),React.createElement("div",{className:"spr-form-review-title"},React.createElement("label",{className:"spr-form-label"},"Country"),React.createElement("input",{className:"spr-form-input spr-form-input-text",maxLength:"128",type:"text",name:"review[country]",placeholder:"Tell us your region",defaultValue:""})),React.createElement("div",{className:"spr-form-review-body"},React.createElement("label",{className:"spr-form-label"},"Body of Review ",React.createElement("span",{className:"spr-form-review-body-charactersremaining"},"(",this.bodyleft,")")),React.createElement("div",{className:"spr-form-input"},React.createElement("textarea",{ref:"reviewbody",className:"spr-form-input spr-form-input-textarea",name:"review[body]",rows:"10",placeholder:"Write your comments here",defaultValue:"",maxLength:"1500",onChange:this.bodychange})))),React.createElement("fieldset",{className:"spr-form-actions"},React.createElement("a",{className:"spr-button spr-button-primary button button-primary btn btn-primary",Style:{background:"#F40",color:"white"},onClick:this.formsubmit},"Submit Review")))):"",this.showreviewlist==1?React.createElement("div",{className:"spr-reviews"},this.state.rows.map(function(c,b){return React.createElement("div",{className:"spr-review"},React.createElement("div",{className:"spr-review-header"},React.createElement("span",{className:"spr-starratings spr-review-header-starratings"},this.generatestart(c.rating)," ",c.country),React.createElement("h3",{className:"spr-review-header-title"},c.title),React.createElement("span",{className:"spr-review-header-byline"},React.createElement("strong",null,c.author),"  on ",React.createElement("strong",null,c.createstring))),React.createElement("div",{className:"spr-review-content"},React.createElement("p",{className:"spr-review-content-body"},c.body)),React.createElement("div",{className:"bs-example bs-example-images"},JSON.parse(c.imageurl).map(function(e,d){return React.createElement("span",{className:"jqzoompropic",style:{width:"100px",height:"100px","float":"left",marginRight:"10px"}},React.createElement("img",{classNamme:"img-rounded",src:this.root+"/uploads/thumb/"+e,"data-holder-rendered":"true",style:{width:"100px",height:"100px"},onClick:this.piczoon}))}.bind(this))),React.createElement("div",{className:"spr-review-footer"},React.createElement("a",{href:"#",className:"spr-review-reportreview"})))}.bind(this)),React.createElement(Page,{onPagination:this.pagination,totalRows:this.state.total,listRows:this.state.pagesize,nowPage:this.state.selected,firstRow:(this.state.selected-1)*this.state.pagesize})):""))}});ReactDOM.render(React.createElement(a,null),document.getElementById("product-reviews"))});