window.Maillist=React.createClass({displayName:"Maillist",heads:{id:"邮箱id",emailaddress:"邮箱地址",issub:"是否订阅"},componentDidMount:function(){var a=this;$.ajax({url:"//"+window.config.root+"/index.php/Home/Mail/config",dataType:"json",success:function(b){a.config=b;this.forceUpdate()}.bind(this)});$.ajax({url:"//"+window.config.root+"/index.php/Home/Mail/subemailaddress",dataType:"json",success:function(b){this.setState(b)}.bind(this)})},getValue:function(a,b){if(this.config[a]){return this.config[a][b]}else{return b}},pagination:function(a){if(a>this.state.totalpage){return false}$.ajax({url:"//"+window.config.root+"/index.php/Home/Mail/subemailaddress",dataType:"json",data:{page:parseInt(a)},success:function(b){this.setState(b)}.bind(this)})},getInitialState:function(){return{rows:[],selected:1,total:0,totalpage:1}},deleteitem:function(a){if(confirm("你确定要删除吗？？")){$.ajax({url:"//"+window.config.root+"/index.php/Home/Mail/deleteitem",dataType:"json",data:{id:a},success:function(b){this.pagination(this.state.selected)}.bind(this)})}},render:function(){if(!this.config||!this.state){return false}return React.createElement("div",null,React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,Object.keys(this.heads).map(function(a){return React.createElement("th",null,this.heads[a])},this),React.createElement("th",null,"\u64CD\u4F5C"))),React.createElement("tbody",null,this.state.rows.map(function(a){return React.createElement("tr",null,Object.keys(this.heads).map(function(b){return React.createElement("td",null,this.getValue(b,a[b]))},this),React.createElement("td",null,React.createElement("button",{type:"button","data-id":a.id,className:"btn btn-danger",onClick:this.deleteitem.bind(this,a.id)},"\u5220\u9664\u8BB0\u5F55")))}.bind(this)))),React.createElement(Page,{onPagination:this.pagination,totalRows:this.state.total,listRows:this.state.pagesize,nowPage:this.state.selected,firstRow:(this.state.selected-1)*this.state.pagesize}))}});
